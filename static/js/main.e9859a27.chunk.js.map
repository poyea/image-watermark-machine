{"version":3,"sources":["styles/Home.module.css","styles/Buttons.module.css","styles/Dragover.module.css","components/buttons.js","components/dragover.js","Home.js","reportWebVitals.js","index.js"],"names":["module","exports","Buttons","props","clearDesk","applyWaterMark","downloadImages","className","styles","buttons","button","onClick","title","Dragover","isDragFocus","zone","focus","id","WATERMARK_STRING","Date","getFullYear","repeat","Home","refStickyContainer","useRef","useState","isSticky","setSticky","files","setFiles","filesArray","setFilesArray","setDragFocus","isDrawn","setDrawn","localWaterMark","setLocalWaterMark","localColor","setLocalColor","addTextToImage","imagePath","text","toModifyCanvas","document","getElementById","context","getContext","img","Image","src","onload","width","height","drawImage","lineWidth","fillStyle","hex","p16","parseInt","substring","g","b","toRGB","lineStyle","font","fillText","mul","yTran","count","save","translate","restore","handleScroll","current","getBoundingClientRect","top","handleDragEnter","handleDragExit","useEffect","window","addEventListener","evt","preventDefault","dataTransfer","handleUploadFiles","removeEventListener","length","i","push","main","ref","stickybanner","sticky","wrapper","description","type","accept","multiple","onChange","e","target","input","value","v","color","map","file","idx","alt","URL","createObjectURL","hidden","footer","href","rel","clearRect","forEach","link","createElement","filename","extension","lastIndexOf","name","download","toDataURL","click","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.e9859a27.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"Home_main__2L4cf\",\"footer\":\"Home_footer__3eZco\",\"title\":\"Home_title__2jL4m\",\"description\":\"Home_description__1txge\",\"stickybanner\":\"Home_stickybanner__Kizvz\",\"wrapper\":\"Home_wrapper__3LREN\",\"sticky\":\"Home_sticky__2Q_3w\",\"logo\":\"Home_logo__3etHn\",\"img\":\"Home_img__3BH-p\",\"hidden\":\"Home_hidden__3JmsZ\",\"input\":\"Home_input__1cYKu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"buttons\":\"Buttons_buttons__3blPu\",\"button\":\"Buttons_button__2sOd_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"zone\":\"Dragover_zone__1kqwW\",\"focus\":\"Dragover_focus__1v1qD\"};","import React from 'react';\nimport styles from '../styles/Buttons.module.css';\n\nconst Buttons = (props) => {\n  const { clearDesk, applyWaterMark, downloadImages } = props;\n  return (\n    <div className={styles.buttons}>\n      <button\n        className={styles.button}\n        onClick={clearDesk}\n        title=\"Clear the page.\"\n      >\n        X\n      </button>\n      {/* <button className={styles.button}>+</button> */}\n      <button\n        className={styles.button}\n        onClick={applyWaterMark}\n        title=\"Apply watermarks.\"\n      >\n        A\n      </button>\n      <button\n        className={styles.button}\n        onClick={downloadImages}\n        title=\"Download the edited images.\"\n      >\n        D\n      </button>\n    </div>\n  );\n};\n\nexport default Buttons;\n","import React from 'react';\nimport styles from '../styles/Dragover.module.css';\n\nconst Dragover = (props) => {\n  const { isDragFocus } = props;\n\n  return (\n    <div\n      className={`${styles.zone} ${isDragFocus ? styles.focus : ''}`}\n      id=\"dragover\"\n    ></div>\n  );\n};\n\nexport default Dragover;\n","import React, { useEffect, useRef, useState } from 'react';\nimport Buttons from './components/buttons';\nimport Dragover from './components/dragover';\nimport styles from './styles/Home.module.css';\n\nconst WATERMARK_STRING = `Copyright Â© ${new Date().getFullYear()} J. All Rights Reserved.     `.repeat(\n  100\n);\nconst WATERMARK_FILLSTYLE = '#008cff';\nconst WATERMARK_LINESTYLE = '#ffffff';\n\nconst Home = () => {\n  /*\n   * Sticky header hooks.\n   */\n  const refStickyContainer = useRef(null);\n  const [isSticky, setSticky] = useState(false);\n  /*\n   * Files hooks for processing.\n   */\n  const [files, setFiles] = useState({});\n  const [filesArray, setFilesArray] = useState([]);\n\n  const [isDragFocus, setDragFocus] = useState(false);\n\n  const [isDrawn, setDrawn] = useState(false);\n\n  const [localWaterMark, setLocalWaterMark] = useState(WATERMARK_STRING);\n\n  const [localColor, setLocalColor] = useState(WATERMARK_FILLSTYLE);\n\n  const toRGB = (hex) => {\n    let p16 = parseInt(hex.substring(1), 16);\n    let r = (p16 >> 16) & 255;\n    let g = (p16 >> 8) & 255;\n    let b = p16 & 255;\n    return `rgb(${r},${g},${b},0.5)`;\n  };\n\n  const addTextToImage = (imagePath, text, id) => {\n    let toModifyCanvas = document.getElementById(id);\n    let context = toModifyCanvas.getContext('2d');\n    let img = new Image();\n    img.src = imagePath;\n    img.onload = () => {\n      toModifyCanvas.width = img.width;\n      toModifyCanvas.height = img.height;\n      context.drawImage(img, 0, 0);\n      context.lineWidth = 1;\n      context.fillStyle = toRGB(localColor);\n      context.lineStyle = WATERMARK_LINESTYLE;\n      context.font = `${toModifyCanvas.height / 10}px serif`;\n      // context.rotate(Math.PI / 4);\n      context.fillText(text, 0, 0);\n      /*\n       * Drawings\n       */\n      for (let mul = -1; mul <= 1; mul += 2) {\n        for (\n          let xTran = 0, yTran = 0, count = toModifyCanvas.width / 200;\n          count >= 2;\n          count -= 1\n        ) {\n          context.save();\n          context.translate(xTran, yTran);\n          context.fillText(text, 0, 0);\n          context.restore();\n          yTran -= (toModifyCanvas.height / count) * mul;\n        }\n      }\n    };\n  };\n\n  const handleScroll = () => {\n    if (refStickyContainer.current) {\n      setSticky(refStickyContainer.current.getBoundingClientRect().top <= 0);\n    }\n  };\n\n  const applyWaterMark = () => {\n    filesArray.forEach((file, idx) => {\n      addTextToImage(URL.createObjectURL(file), localWaterMark, idx);\n    });\n    setDrawn(true);\n  };\n\n  const clearDesk = () => {\n    for (let i = 0; i < filesArray.length; ++i) {\n      let toModifyCanvas = document.getElementById(i);\n      let context = toModifyCanvas.getContext('2d');\n      context.clearRect(0, 0, toModifyCanvas.width, toModifyCanvas.height);\n    }\n    setFiles({});\n    setFilesArray([]);\n    setDrawn(false);\n  };\n\n  const downloadImages = () => {\n    for (let i = 0; i < filesArray.length; ++i) {\n      let link = document.createElement('a');\n      const filename = files[i]['name'];\n      const extension = filename.substring(filename.lastIndexOf('.') + 1);\n      const name = filename.substring(0, filename.lastIndexOf('.'));\n      link.download = `${name}_watermarked.${extension}`;\n      link.href = document.getElementById(i).toDataURL();\n      link.click();\n    }\n  };\n\n  const handleDragEnter = () => {\n    setDragFocus(true);\n  };\n\n  const handleDragExit = () => {\n    setDragFocus(false);\n  };\n\n  useEffect(() => {\n    window.addEventListener('scroll', handleScroll);\n    window.addEventListener('dragover', (evt) => {\n      handleDragEnter();\n      evt.preventDefault();\n    });\n    window.addEventListener('dragover', (evt) => {\n      handleDragEnter();\n      evt.preventDefault();\n    });\n    window.addEventListener('drop', (evt) => {\n      handleDragExit();\n      setFiles(evt.dataTransfer.files);\n      handleUploadFiles(evt.dataTransfer.files);\n      evt.preventDefault();\n    });\n    window.addEventListener('dragleave', (evt) => {\n      handleDragExit();\n      evt.preventDefault();\n    });\n    document.title = 'Image Watermarker';\n    return () => {\n      window.removeEventListener('scroll', () => handleScroll);\n    };\n  }, []);\n\n  // useEffect(() => {\n  //   console.log(files);\n  // }, [files]);\n\n  const handleUploadFiles = (files) => {\n    if (files.length === 0) {\n      return;\n    }\n    // setFiles(files);\n    let filesArray = [];\n    for (let i = 0; i < files.length; ++i) {\n      filesArray.push(files[i]);\n    }\n    setFilesArray(filesArray);\n  };\n\n  const handleInput = (value) => {\n    setLocalWaterMark(value);\n  };\n\n  const handleColor = (value) => {\n    setLocalColor(value);\n  };\n\n  return (\n    <>\n      <main className={styles.main} id=\"main\">\n        <div\n          ref={refStickyContainer}\n          className={`\n            ${isSticky ? styles.stickybanner : ''}\n            `}\n        >\n          <h1\n            className={`\n            ${styles.title} ${\n              isSticky ? styles.sticky + ' ' + styles.wrapper : ''\n            }\n            `}\n          >\n            Image Watermarker\n          </h1>\n        </div>\n        <p className={styles.description}>\n          <input\n            type=\"file\"\n            id=\"input\"\n            files={filesArray}\n            accept=\"image/*\"\n            multiple\n            onChange={(e) => handleUploadFiles(e.target.files)}\n          />\n          <br />\n          <input\n            className={styles.input}\n            type=\"text\"\n            value={localWaterMark}\n            onChange={(v) => handleInput(v.target.value)}\n          ></input>\n          <input\n            className={styles.color}\n            type=\"color\"\n            value={localColor}\n            onChange={(v) => handleColor(v.target.value)}\n          ></input>\n        </p>\n        {filesArray.length > 0 &&\n          filesArray.map((file, idx) => (\n            <div key={idx}>\n              <img\n                id={'img' + idx}\n                alt={file['name']}\n                src={URL.createObjectURL(file)}\n                className={styles.img + (!isDrawn ? '' : ` ${styles.hidden}`)}\n              ></img>\n              <canvas\n                id={idx}\n                className={styles.img + (!isDrawn ? ` ${styles.hidden}` : '')}\n              ></canvas>\n            </div>\n          ))}\n      </main>\n\n      <footer className={styles.footer}>\n        <a\n          href=\"https://github.com/poyea\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          dev @poyea - {new Date().getFullYear()}\n        </a>\n        <hr></hr>\n        <a\n          href=\"https://github.com/poyea\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          {filesArray.length === 0 && (\n            <img\n              alt=\"@poyea\"\n              src=\"https://avatars3.githubusercontent.com/u/24757020\"\n            ></img>\n          )}\n        </a>\n      </footer>\n      <Dragover isDragFocus={isDragFocus} />\n      <Buttons\n        clearDesk={clearDesk}\n        applyWaterMark={applyWaterMark}\n        downloadImages={downloadImages}\n      />\n    </>\n  );\n};\n\nexport default Home;\n","const reportWebVitals = (onPerfEntry) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Home from './Home';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Home />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}