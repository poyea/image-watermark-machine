(this["webpackJsonpimage-watermark-machine"]=this["webpackJsonpimage-watermark-machine"]||[]).push([[0],[,,function(e,t,n){e.exports={main:"Home_main__2L4cf",footer:"Home_footer__3eZco",title:"Home_title__2jL4m",description:"Home_description__1txge",stickybanner:"Home_stickybanner__Kizvz",wrapper:"Home_wrapper__3LREN",sticky:"Home_sticky__2Q_3w",logo:"Home_logo__3etHn",img:"Home_img__3BH-p",hidden:"Home_hidden__3JmsZ"}},,function(e,t,n){e.exports={buttons:"Buttons_buttons__3blPu",button:"Buttons_button__2sOd_"}},,function(e,t,n){e.exports={zone:"Dragover_zone__1kqwW",focus:"Dragover_focus__1v1qD"}},,,,,,,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(1),r=n.n(c),o=n(7),i=n.n(o),s=(n(13),n(3)),l=n(4),u=n.n(l),d=function(e){var t=e.clearDesk,n=e.applyWaterMark,c=e.downloadImages;return Object(a.jsxs)("div",{className:u.a.buttons,children:[Object(a.jsx)("button",{className:u.a.button,onClick:t,children:"X"}),Object(a.jsx)("button",{className:u.a.button,onClick:n,children:"A"}),Object(a.jsx)("button",{className:u.a.button,onClick:c,children:"D"})]})},f=n(6),m=n.n(f),g=function(e){var t=e.isDragFocus;return Object(a.jsx)("div",{className:"".concat(m.a.zone," ").concat(t?m.a.focus:""),id:"dragover"})},b=n(2),h=n.n(b),j="Copyright \xa9 ".concat((new Date).getFullYear()," J. All Rights Reserved.     ").repeat(100),p=function(){var e=Object(c.useRef)(null),t=Object(c.useState)(!1),n=Object(s.a)(t,2),r=n[0],o=n[1],i=Object(c.useState)({}),l=Object(s.a)(i,2),u=l[0],f=l[1],m=Object(c.useState)([]),b=Object(s.a)(m,2),p=b[0],_=b[1],v=Object(c.useState)(!1),O=Object(s.a)(v,2),x=O[0],w=O[1],k=Object(c.useState)(!1),y=Object(s.a)(k,2),D=y[0],L=y[1],E=function(){e.current&&o(e.current.getBoundingClientRect().top<=0)},I=function(){w(!0)},N=function(){w(!1)};Object(c.useEffect)((function(){return window.addEventListener("scroll",E),window.addEventListener("dragover",(function(e){I(),e.preventDefault()})),window.addEventListener("dragover",(function(e){I(),e.preventDefault()})),window.addEventListener("drop",(function(e){N(),f(e.dataTransfer.files),H(e.dataTransfer.files),e.preventDefault()})),window.addEventListener("dragleave",(function(e){N(),e.preventDefault()})),document.title="Image Watermarker",function(){window.removeEventListener("scroll",(function(){return E}))}}),[]),Object(c.useEffect)((function(){console.log(u)}),[u]);var H=function(e){if(0!==e.length){for(var t=[],n=0;n<e.length;++n)t.push(e[n]);_(t)}};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("main",{className:h.a.main,id:"main",children:[Object(a.jsx)("div",{ref:e,className:"\n            ".concat(r?h.a.stickybanner:"","\n            "),children:Object(a.jsx)("h1",{className:"\n            ".concat(h.a.title," ").concat(r?h.a.sticky+" "+h.a.wrapper:"","\n            "),children:"Image Watermarker"})}),Object(a.jsx)("p",{className:h.a.description,children:Object(a.jsx)("input",{type:"file",id:"input",files:p,accept:"image/*",multiple:!0,onChange:function(e){return H(e.target.files)}})}),p.length>0&&p.map((function(e,t){return Object(a.jsxs)("div",{children:[Object(a.jsx)("img",{id:"img"+t,alt:e.name,src:URL.createObjectURL(e),className:h.a.img+(D?" ".concat(h.a.hidden):"")}),Object(a.jsx)("canvas",{id:t,className:h.a.img+(D?"":" ".concat(h.a.hidden))})]},t)}))]}),Object(a.jsxs)("footer",{className:h.a.footer,children:[Object(a.jsxs)("a",{href:"https://github.com/poyea",target:"_blank",rel:"noopener noreferrer",children:["dev @poyea - ",(new Date).getFullYear()]}),Object(a.jsx)("hr",{}),Object(a.jsx)("a",{href:"https://github.com/poyea",target:"_blank",rel:"noopener noreferrer",children:0===p.length&&Object(a.jsx)("img",{alt:"@poyea",src:"https://avatars3.githubusercontent.com/u/24757020"})})]}),Object(a.jsx)(g,{isDragFocus:x}),Object(a.jsx)(d,{clearDesk:function(){for(var e=0;e<p.length;++e){var t=document.getElementById(e);t.getContext("2d").clearRect(0,0,t.width,t.height)}f({}),_([]),L(!1)},applyWaterMark:function(){p.forEach((function(e,t){!function(e,t,n){var a=document.getElementById(n),c=a.getContext("2d"),r=new Image;r.src=e,r.onload=function(){a.width=r.width,a.height=r.height,c.drawImage(r,0,0),c.lineWidth=1,c.fillStyle="rgb(0, 140, 255)",c.lineStyle="#ffffff",c.font="".concat(a.height/80,"px serif"),c.rotate(Math.PI/4),c.fillText(t,0,0);for(var e=-1;e<=1;e+=2)for(var n=0,o=a.width/200;o>=2;o-=1)c.save(),c.translate(0,n),c.fillText(t,0,0),c.restore(),n-=a.height/o*e}}(URL.createObjectURL(e),j,t)})),L(!0)},downloadImages:function(){for(var e=0;e<p.length;++e){var t=document.createElement("a"),n=u[e].name,a=n.substring(n.lastIndexOf(".")+1),c=n.substring(0,n.lastIndexOf("."));t.download="".concat(c,"_watermarked.").concat(a),t.href=document.getElementById(e).toDataURL(),t.click()}}})]})},_=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,15)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),r(e),o(e)}))};i.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(p,{})}),document.getElementById("root")),_()}],[[14,1,2]]]);
//# sourceMappingURL=main.d464ec30.chunk.js.map