{"version":3,"sources":["styles/Home.module.css","styles/Buttons.module.css","styles/Dragover.module.css","components/buttons.js","components/dragover.js","Home.js","reportWebVitals.js","index.js"],"names":["module","exports","Buttons","props","clearDesk","applyWaterMark","downloadImages","className","styles","buttons","button","onClick","title","Dragover","isDragFocus","zone","focus","id","WATERMARK_STRING","Date","getFullYear","repeat","Home","refStickyContainer","useRef","useState","isSticky","setSticky","files","setFiles","filesArray","setFilesArray","setDragFocus","isDrawn","setDrawn","handleScroll","current","getBoundingClientRect","top","handleDragEnter","handleDragExit","useEffect","window","addEventListener","evt","preventDefault","dataTransfer","handleUploadFiles","document","removeEventListener","console","log","length","i","push","main","ref","stickybanner","sticky","wrapper","description","type","accept","multiple","onChange","e","target","map","file","idx","alt","src","URL","createObjectURL","img","hidden","footer","href","rel","toModifyCanvas","getElementById","getContext","clearRect","width","height","forEach","imagePath","text","context","Image","onload","drawImage","lineWidth","fillStyle","lineStyle","font","rotate","Math","PI","fillText","mul","yTran","count","save","translate","restore","addTextToImage","link","createElement","filename","extension","substring","lastIndexOf","name","download","toDataURL","click","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.05ebe376.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"Home_main__2L4cf\",\"footer\":\"Home_footer__3eZco\",\"title\":\"Home_title__2jL4m\",\"description\":\"Home_description__1txge\",\"stickybanner\":\"Home_stickybanner__Kizvz\",\"wrapper\":\"Home_wrapper__3LREN\",\"sticky\":\"Home_sticky__2Q_3w\",\"logo\":\"Home_logo__3etHn\",\"img\":\"Home_img__3BH-p\",\"hidden\":\"Home_hidden__3JmsZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"buttons\":\"Buttons_buttons__3blPu\",\"button\":\"Buttons_button__2sOd_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"zone\":\"Dragover_zone__1kqwW\",\"focus\":\"Dragover_focus__1v1qD\"};","import React from 'react';\nimport styles from '../styles/Buttons.module.css';\n\nconst Buttons = (props) => {\n  const { clearDesk, applyWaterMark, downloadImages } = props;\n  return (\n    <div className={styles.buttons}>\n      <button\n        className={styles.button}\n        onClick={clearDesk}\n        title=\"Clear the page.\"\n      >\n        X\n      </button>\n      {/* <button className={styles.button}>+</button> */}\n      <button\n        className={styles.button}\n        onClick={applyWaterMark}\n        title=\"Apply watermarks.\"\n      >\n        A\n      </button>\n      <button\n        className={styles.button}\n        onClick={downloadImages}\n        title=\"Download the edited images.\"\n      >\n        D\n      </button>\n    </div>\n  );\n};\n\nexport default Buttons;\n","import React from 'react';\nimport styles from '../styles/Dragover.module.css';\n\nconst Dragover = (props) => {\n  const { isDragFocus } = props;\n\n  return (\n    <div\n      className={`${styles.zone} ${isDragFocus ? styles.focus : ''}`}\n      id=\"dragover\"\n    ></div>\n  );\n};\n\nexport default Dragover;\n","import React, { useEffect, useRef, useState } from 'react';\nimport Buttons from './components/buttons';\nimport Dragover from './components/dragover';\nimport styles from './styles/Home.module.css';\n\nconst WATERMARK_STRING = `Copyright Â© ${new Date().getFullYear()} J. All Rights Reserved.     `.repeat(\n  100\n);\nconst WATERMARK_FILLSTYLE = 'rgb(0, 140, 255)';\nconst WATERMARK_LINESTYLE = '#ffffff';\n\nconst Home = () => {\n  /*\n   * Sticky header hooks.\n   */\n  const refStickyContainer = useRef(null);\n  const [isSticky, setSticky] = useState(false);\n  /*\n   * Files hooks for processing.\n   */\n  const [files, setFiles] = useState({});\n  const [filesArray, setFilesArray] = useState([]);\n\n  const [isDragFocus, setDragFocus] = useState(false);\n\n  const [isDrawn, setDrawn] = useState(false);\n\n  const addTextToImage = (imagePath, text, id) => {\n    let toModifyCanvas = document.getElementById(id);\n    let context = toModifyCanvas.getContext('2d');\n    let img = new Image();\n    img.src = imagePath;\n    img.onload = () => {\n      toModifyCanvas.width = img.width;\n      toModifyCanvas.height = img.height;\n      context.drawImage(img, 0, 0);\n      context.lineWidth = 1;\n      context.fillStyle = WATERMARK_FILLSTYLE;\n      context.lineStyle = WATERMARK_LINESTYLE;\n      context.font = `${toModifyCanvas.height / 80}px serif`;\n      context.rotate(Math.PI / 4);\n      context.fillText(text, 0, 0);\n      /*\n       * Drawings\n       */\n      for (let mul = -1; mul <= 1; mul += 2) {\n        for (\n          let xTran = 0, yTran = 0, count = toModifyCanvas.width / 200;\n          count >= 2;\n          count -= 1\n        ) {\n          context.save();\n          context.translate(xTran, yTran);\n          context.fillText(text, 0, 0);\n          context.restore();\n          yTran -= (toModifyCanvas.height / count) * mul;\n        }\n      }\n    };\n  };\n\n  const handleScroll = () => {\n    if (refStickyContainer.current) {\n      setSticky(refStickyContainer.current.getBoundingClientRect().top <= 0);\n    }\n  };\n\n  const applyWaterMark = () => {\n    filesArray.forEach((file, idx) => {\n      addTextToImage(URL.createObjectURL(file), WATERMARK_STRING, idx);\n    });\n    setDrawn(true);\n  };\n\n  const clearDesk = () => {\n    for (let i = 0; i < filesArray.length; ++i) {\n      let toModifyCanvas = document.getElementById(i);\n      let context = toModifyCanvas.getContext('2d');\n      context.clearRect(0, 0, toModifyCanvas.width, toModifyCanvas.height);\n    }\n    setFiles({});\n    setFilesArray([]);\n    setDrawn(false);\n  };\n\n  const downloadImages = () => {\n    for (let i = 0; i < filesArray.length; ++i) {\n      let link = document.createElement('a');\n      const filename = files[i]['name'];\n      const extension = filename.substring(filename.lastIndexOf('.') + 1);\n      const name = filename.substring(0, filename.lastIndexOf('.'));\n      link.download = `${name}_watermarked.${extension}`;\n      link.href = document.getElementById(i).toDataURL();\n      link.click();\n    }\n  };\n\n  const handleDragEnter = () => {\n    setDragFocus(true);\n  };\n\n  const handleDragExit = () => {\n    setDragFocus(false);\n  };\n\n  useEffect(() => {\n    window.addEventListener('scroll', handleScroll);\n    window.addEventListener('dragover', (evt) => {\n      handleDragEnter();\n      evt.preventDefault();\n    });\n    window.addEventListener('dragover', (evt) => {\n      handleDragEnter();\n      evt.preventDefault();\n    });\n    window.addEventListener('drop', (evt) => {\n      handleDragExit();\n      setFiles(evt.dataTransfer.files);\n      handleUploadFiles(evt.dataTransfer.files);\n      evt.preventDefault();\n    });\n    window.addEventListener('dragleave', (evt) => {\n      handleDragExit();\n      evt.preventDefault();\n    });\n    document.title = 'Image Watermarker';\n    return () => {\n      window.removeEventListener('scroll', () => handleScroll);\n    };\n  }, []);\n\n  useEffect(() => {\n    console.log(files);\n  }, [files]);\n\n  const handleUploadFiles = (files) => {\n    if (files.length === 0) {\n      return;\n    }\n    // setFiles(files);\n    let filesArray = [];\n    for (let i = 0; i < files.length; ++i) {\n      filesArray.push(files[i]);\n    }\n    setFilesArray(filesArray);\n  };\n\n  return (\n    <>\n      <main className={styles.main} id=\"main\">\n        <div\n          ref={refStickyContainer}\n          className={`\n            ${isSticky ? styles.stickybanner : ''}\n            `}\n        >\n          <h1\n            className={`\n            ${styles.title} ${\n              isSticky ? styles.sticky + ' ' + styles.wrapper : ''\n            }\n            `}\n          >\n            Image Watermarker\n          </h1>\n        </div>\n        <p className={styles.description}>\n          <input\n            type=\"file\"\n            id=\"input\"\n            files={filesArray}\n            accept=\"image/*\"\n            multiple\n            onChange={(e) => handleUploadFiles(e.target.files)}\n          />\n        </p>\n        {filesArray.length > 0 &&\n          filesArray.map((file, idx) => (\n            <div key={idx}>\n              <img\n                id={'img' + idx}\n                alt={file['name']}\n                src={URL.createObjectURL(file)}\n                className={styles.img + (!isDrawn ? '' : ` ${styles.hidden}`)}\n              ></img>\n              <canvas\n                id={idx}\n                className={styles.img + (!isDrawn ? ` ${styles.hidden}` : '')}\n              ></canvas>\n            </div>\n          ))}\n      </main>\n\n      <footer className={styles.footer}>\n        <a\n          href=\"https://github.com/poyea\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          dev @poyea - {new Date().getFullYear()}\n        </a>\n        <hr></hr>\n        <a\n          href=\"https://github.com/poyea\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          {filesArray.length === 0 && (\n            <img\n              alt=\"@poyea\"\n              src=\"https://avatars3.githubusercontent.com/u/24757020\"\n            ></img>\n          )}\n        </a>\n      </footer>\n      <Dragover isDragFocus={isDragFocus} />\n      <Buttons\n        clearDesk={clearDesk}\n        applyWaterMark={applyWaterMark}\n        downloadImages={downloadImages}\n      />\n    </>\n  );\n};\n\nexport default Home;\n","const reportWebVitals = (onPerfEntry) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Home from './Home';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Home />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}